---
layout: post
title: Benchmarks - Underscore.js vs Lodash.js vs Lazy.js
date: 2013-10-10 08:15:56.000000000 -05:00
categories: []
tags: []
status: publish
type: post
published: true
meta:
  _edit_last: '25054220'
  _publicize_pending: '1'
  publicize_facebook_url: https://facebook.com/1471181839_10202225184938998
  _wpas_done_881585: '1'
  _publicize_done_external: a:1:{s:8:"facebook";a:1:{i:1471181839;b:1;}}
  publicize_twitter_user: adamnengland
  publicize_twitter_url: http://t.co/cszB4iWCah
  _wpas_done_881586: '1'
  publicize_linkedin_url: http://www.linkedin.com/updates?discuss=&scope=22010808&stype=M&topic=5794059373533724672&type=U&a=qxVt
  _wpas_done_881584: '1'
  publicize_tumblr_url: http://.tumblr.com/post/
  _wpas_skip_881585: '1'
  _wpas_skip_881586: '1'
  _wpas_skip_881584: '1'
  _wpas_skip_4227152: '1'
author:
  login: adamnengland
  email: adam.n.england@gmail.com
  display_name: adamnengland
  first_name: ''
  last_name: ''
excerpt: !ruby/object:Hpricot::Doc
  options: {}
---
<p><strong>Update 10/10/2013</strong> - A good point was made that doing the array creation isn't really going to be different between the libraries.  I've modified the find/map/lazy samples to reflect this, and updated the numbers appropriately.</p>
<p>Fast code is fun. And nothing is more fun than making your application faster by dropping in a new library, without spending time re-writing code or spending money on new hardware.</p>
<p>Luckily, there are 2 projects for your next node.js/web app that promise to do just this.  <a href="http://lodash.com/">lodash.js</a> and <a href="http://danieltao.com/lazy.js/">lazy.js</a> are both replacements for <a href="http://underscorejs.org">underscore.js</a> that promise faster performance, as well as some new features.</p>
<p>Lodash is fairly well known for its excellent compatibility with underscore.js.  Lazy, on the other hand, should potentially offer even better performance, at the cost of implementing a slightly different API.</p>
<p>{% highlight javascript %}
Underscore = require('underscore')<br />
Lodash = require('lodash')<br />
Lazy = require('lazy.js')<br />
exports.compare = {<br />
  "underscore" : function () {<br />
    var array = Underscore.range(1000)<br />
  },<br />
  "lodash" : function () {<br />
    var array = Lodash.range(1000)<br />
  },<br />
  "lazy" : function () {<br />
    var array = Lazy.range(1000).toArray()<br />
  }<br />
};<br />
require("bench").runMain()<br />
{% endhighlight %}</p>
<p>Running this comparison shows lodash as the winner, underscore close, and lazy way behind.  That said, this item is too trivial to really be interesting, and it doesn't really give lazy.js a fair chance to do any lazy evaluation, so lets keep going.</p>
<ul>
<li>lodash - 110.98 operations / ms</li>
<li>underscore - 103.60 operations / ms</li>
<li>lazy - 28.85 operations /ms</li>
</ul>
<p>{% highlight javascript %}
Underscore = require('underscore')<br />
Lodash = require('lodash')<br />
Lazy = require('lazy.js')<br />
var array = Underscore.range(1000)<br />
exports.compare = {<br />
  "underscore" : function () {<br />
    Underscore.find(array, function(item) {<br />
      return item == 500;<br />
    })<br />
  },<br />
  "lodash" : function () {<br />
    Lodash.find(array, function(item) {<br />
      return item == 500;<br />
    })<br />
  },<br />
  "lazy" : function () {<br />
    Lazy(array).find(function(item) {<br />
      return item == 500;<br />
    })<br />
  }<br />
};<br />
require("bench").runMain()<br />
{% endhighlight %}</p>
<p>And the results</p>
<ul>
<li>WINNER -lazy - 175.65 operations /ms</li>
<li>lodash - 168.47 operations / ms</li>
<li>underscore - 36.98 operations / ms</li>
</ul>
<p>Lazy.js is the clear winner here.  Lets try another example to see if the setup changes with even more processing.</p>
<p>{% highlight javascript %}
Underscore = require('underscore')<br />
Lodash = require('lodash')<br />
Lazy = require('lazy.js')</p>
<p>square = function(x) { return x * x; }<br />
inc = function(x) { return x + 1; }<br />
isEven = function(x) { return x % 2 === 0; }<br />
var array = Underscore.range(1000)</p>
<p>exports.compare = {<br />
  "underscore" : function () {<br />
    Underscore.chain(array).map(square).map(inc).filter(isEven).take(5).value()<br />
  },<br />
  "lodash" : function () {<br />
    Lodash.chain(array).map(square).map(inc).filter(isEven).take(5).value()<br />
  },<br />
  "lazy" : function () {<br />
    Lazy(array).map(square).map(inc).filter(isEven).take(5)<br />
  }<br />
};<br />
require("bench").runMain()<br />
{% endhighlight %}</p>
<ul>
<li>WINNER - lazy - 14375.12 operations /ms</li>
<li>lodash - 19.10 operations / ms</li>
<li>underscore - 7.17 operations / ms</li>
</ul>
<p>Full source code is available on <a href="https://github.com/adamnengland/js-utility-bench">github</a></p>
