---
layout: post
title: Fluent Interfaces in Coffeescript
date: 2013-07-30 14:30:39.000000000 -05:00
categories:
- nodejs
tags:
- coffeescript
status: publish
type: post
published: true
author: Adam N England
excerpt: <p>We've all seen them - builder patterns that make object construction clean and readable.</p><p>person().named('Bob').withSpouse('Alice').bornOn('01-26-1982').build()</p><p>I used to do these all the time in Java (we called them fluent interfaces), and I just realized today that I had no idea how to do this style in Coffeescript. Well, lets remedy that.</p>
---
<p>We've all seen them - builder patterns that make object construction clean and readable.</p>
<p>person().named('Bob').withSpouse('Alice').bornOn('01-26-1982').build()</p>
<p>I used to do these all the time in Java (we called them fluent interfaces), and I just realized today that I had no idea how to do this style in Coffeescript. Well, lets remedy that.</p>
<p>To get started, I'm going to follow the basic pattern I've followed in Java. Since CoffeeScript provides native class functionality, its a pretty simple clone.</p>
{% highlight coffeescript linenos%}
class Person
  named: (name) ->
    @name = name
    @
  withSpouse: (spouse) ->
    @spouse = spouse
    @
  bornOn: (dob) ->
    @dob = dob
    @
  build : ->
    return {
      name: @name
      spouse: @spouse
      dob: @dob
    }
  console.log new Person().named('Adam').withSpouse('Rachel').build()
{% endhighlight %}

<p>But hey, this is coffeescript.  We can do better.  Lets use a attribute shortcut to reduce the code length.</p>

{% highlight coffeescript linenos %}
class Person
  named: (@name) ->
    @
  withSpouse: (@spouse) ->
    @
  bornOn: (@dob) ->
    @
  build : ->
    return {
      name: @name
      spouse: @spouse
      dob: @dob
    }
console.log new Person().named('Adam').withSpouse('Rachel').build()
{% endhighlight %}

<p>I suspect there may be an even cleaner way to do this, but this seems concise enough for now.</p>
<p>The full source code is available here:  https://github.com/adamnengland/coffee-fluent-interface</p>
